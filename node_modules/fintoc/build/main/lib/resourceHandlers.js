"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resourceAll = resourceAll;
exports.resourceGet = resourceGet;
exports.resourceCreate = resourceCreate;
exports.resourceUpdate = resourceUpdate;
exports.resourceDelete = resourceDelete;
const utils_1 = require("./utils");
/**
 * Fetch all instances of a resource.
 *
 * @param client - The Client object passed to the retrieved objects
 * @param path - The path within the API server for the resource
 * @param klass - Class that will wrap the instances of the resource
 * @param handlers - The post-request handlers
 * @param methods - An array of the methods that the objects can execute
 * @param params - The parameters passed to the request
 * @returns - A generator (or an array, depending on the `lazy` param) of objects of class `klass`
 */
async function resourceAll(client, path, klass, handlers = {}, methods, params) {
    const { lazy, ...innerParams } = { lazy: true, ...params };
    const data = await client.request({ path, paginated: true, params: innerParams });
    if (lazy) {
        return (0, utils_1.objetizeGenerator)(data, klass, client, handlers, methods, path);
    }
    const elements = [];
    for await (const element of data) {
        elements.push(await (0, utils_1.objetize)(klass, client, element, handlers, methods, path));
    }
    return elements;
}
/**
 * Fetch a specific instance of a resource.
 *
 * @param client - The Client object passed to the retrieved object
 * @param path - The path within the API server for the resource
 * @param id - The identifier value of the object to retrieve
 * @param klass - Class that will wrap the instance of the resource
 * @param handlers - The post-request handlers
 * @param methods - An array of the methods that the object can execute
 * @param params - The parameters passed to the request
 * @returns - An object of class `klass`
 */
async function resourceGet(client, path, id, klass, handlers = {}, methods, params) {
    const data = await client.request({ path: `${path}/${id}`, method: 'get', params });
    return (0, utils_1.objetize)(klass, client, data, handlers, methods, path);
}
/**
 * Create a new instance of a resource.
 *
 * @param client - The Client object passed to the created object
 * @param path - The path within the API server for the resource
 * @param klass - Class that will wrap the instance of the resource
 * @param handlers - The post-request handlers
 * @param methods - An array of the methods that the object can execute
 * @param params - The parameters passed to the request
 * @returns - An object of class `klass`
 */
async function resourceCreate(client, path, klass, handlers = {}, methods, params, idempotencyKey) {
    const data = await client.request({
        path, method: 'post', json: params, idempotencyKey,
    });
    return (0, utils_1.objetize)(klass, client, data, handlers, methods, path);
}
/**
 * Update a specific instance of a resource.
 *
 * @param client - The Client object passed to the updated object
 * @param path - The path within the API server for the resource
 * @param id - The identifier value of the object to update
 * @param klass - Class that will wrap the instance of the resource
 * @param handlers - The post-request handlers
 * @param methods - An array of the methods that the object can execute
 * @param params - The parameters passed to the request for the resource to be updated
 * @returns - An object of class `klass`
 */
async function resourceUpdate(client, path, id, klass, handlers = {}, methods, params, customPath) {
    const updatePath = customPath || `${path}/${id}`;
    const data = await client.request({ path: updatePath, method: 'patch', json: params });
    return (0, utils_1.objetize)(klass, client, data, handlers, methods, path);
}
/**
 * Delete an instance of a resource.
 *
 * @param client - The Client object passed to the updated object
 * @param path - The path within the API server for the resource
 * @param id - The identifier value of the object to update
 * @param params - The parameters passed to the request
 * @returns The request response
 */
async function resourceDelete(client, path, id, params) {
    return client.request({ path: `${path}/${id}`, method: 'delete', params });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzb3VyY2VIYW5kbGVycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvcmVzb3VyY2VIYW5kbGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQWdCQSxrQ0FnQ0M7QUFjRCxrQ0FrQkM7QUFhRCx3Q0FvQkM7QUFjRCx3Q0FvQkM7QUFXRCx3Q0FPQztBQWxLRCxtQ0FBc0Q7QUFFdEQ7Ozs7Ozs7Ozs7R0FVRztBQUNJLEtBQUssVUFBVSxXQUFXLENBQy9CLE1BQWMsRUFDZCxJQUFZLEVBQ1osS0FBVSxFQUNWLFdBQTRDLEVBQUUsRUFDOUMsT0FBaUIsRUFDakIsTUFBMkI7SUFFM0IsTUFBTSxFQUFFLElBQUksRUFBRSxHQUFHLFdBQVcsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sRUFBRSxDQUFDO0lBQzNELE1BQU0sSUFBSSxHQUFHLE1BQU0sTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsQ0FBQyxDQUFDO0lBQ2xGLElBQUksSUFBSSxFQUFFLENBQUM7UUFDVCxPQUFPLElBQUEseUJBQWlCLEVBQ3RCLElBQUksRUFDSixLQUFLLEVBQ0wsTUFBTSxFQUNOLFFBQVEsRUFDUixPQUFPLEVBQ1AsSUFBSSxDQUNMLENBQUM7SUFDSixDQUFDO0lBQ0QsTUFBTSxRQUFRLEdBQUcsRUFBRSxDQUFDO0lBQ3BCLElBQUksS0FBSyxFQUFFLE1BQU0sT0FBTyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ2pDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFBLGdCQUFRLEVBQzFCLEtBQUssRUFDTCxNQUFNLEVBQ04sT0FBTyxFQUNQLFFBQVEsRUFDUixPQUFPLEVBQ1AsSUFBSSxDQUNMLENBQUMsQ0FBQztJQUNMLENBQUM7SUFDRCxPQUFPLFFBQVEsQ0FBQztBQUNsQixDQUFDO0FBRUQ7Ozs7Ozs7Ozs7O0dBV0c7QUFDSSxLQUFLLFVBQVUsV0FBVyxDQUMvQixNQUFjLEVBQ2QsSUFBWSxFQUNaLEVBQVUsRUFDVixLQUFVLEVBQ1YsV0FBNEMsRUFBRSxFQUM5QyxPQUFpQixFQUNqQixNQUEyQjtJQUUzQixNQUFNLElBQUksR0FBRyxNQUFNLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFJLElBQUksRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO0lBQ3BGLE9BQU8sSUFBQSxnQkFBUSxFQUNiLEtBQUssRUFDTCxNQUFNLEVBQ04sSUFBSSxFQUNKLFFBQVEsRUFDUixPQUFPLEVBQ1AsSUFBSSxDQUNMLENBQUM7QUFDSixDQUFDO0FBRUQ7Ozs7Ozs7Ozs7R0FVRztBQUNJLEtBQUssVUFBVSxjQUFjLENBQ2xDLE1BQWMsRUFDZCxJQUFZLEVBQ1osS0FBVSxFQUNWLFdBQTRDLEVBQUUsRUFDOUMsT0FBaUIsRUFDakIsTUFBMkIsRUFDM0IsY0FBdUI7SUFFdkIsTUFBTSxJQUFJLEdBQUcsTUFBTSxNQUFNLENBQUMsT0FBTyxDQUFDO1FBQ2hDLElBQUksRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsY0FBYztLQUNuRCxDQUFDLENBQUM7SUFDSCxPQUFPLElBQUEsZ0JBQVEsRUFDYixLQUFLLEVBQ0wsTUFBTSxFQUNOLElBQUksRUFDSixRQUFRLEVBQ1IsT0FBTyxFQUNQLElBQUksQ0FDTCxDQUFDO0FBQ0osQ0FBQztBQUVEOzs7Ozs7Ozs7OztHQVdHO0FBQ0ksS0FBSyxVQUFVLGNBQWMsQ0FDbEMsTUFBYyxFQUNkLElBQVksRUFDWixFQUFVLEVBQ1YsS0FBVSxFQUNWLFdBQTRDLEVBQUUsRUFDOUMsT0FBaUIsRUFDakIsTUFBMkIsRUFDM0IsVUFBbUI7SUFFbkIsTUFBTSxVQUFVLEdBQUcsVUFBVSxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsRUFBRSxDQUFDO0lBQ2pELE1BQU0sSUFBSSxHQUFHLE1BQU0sTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUN2RixPQUFPLElBQUEsZ0JBQVEsRUFDYixLQUFLLEVBQ0wsTUFBTSxFQUNOLElBQUksRUFDSixRQUFRLEVBQ1IsT0FBTyxFQUNQLElBQUksQ0FDTCxDQUFDO0FBQ0osQ0FBQztBQUVEOzs7Ozs7OztHQVFHO0FBQ0ksS0FBSyxVQUFVLGNBQWMsQ0FDbEMsTUFBYyxFQUNkLElBQVksRUFDWixFQUFVLEVBQ1YsTUFBMkI7SUFFM0IsT0FBTyxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUUsSUFBSSxFQUFFLEdBQUcsSUFBSSxJQUFJLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztBQUM3RSxDQUFDIn0=