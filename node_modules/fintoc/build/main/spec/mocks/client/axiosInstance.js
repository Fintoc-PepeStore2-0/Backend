"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MockAxiosInstance = void 0;
exports.createAxiosInstance = createAxiosInstance;
const axios_1 = require("axios");
const response_1 = require("./response");
class MockAxiosInstance extends axios_1.Axios {
    constructor(config) {
        super(config);
        const { method, url, params, data, } = config || {};
        this.method = method;
        this.baseURL = url;
        this.params = params;
        this.data = data;
    }
    // @ts-ignore: return type is not assignable
    async request(config) {
        const { method, url, params, data, headers, } = config;
        const usingMethod = method || 'get';
        const usingBaseURL = this.baseURL || '';
        const query = (url === null || url === void 0 ? void 0 : url.includes('?')) ? url.split('?').slice(-1)[0].split('&') : [];
        const innerParams = Object.fromEntries(query.map((x) => x.split('=')));
        const completeParams = { ...innerParams, ...(params === undefined ? {} : params) };
        const usableURL = (url === null || url === void 0 ? void 0 : url.split('//').slice(-1)[0].split('/').slice(1).join('/').split('?')[0]) || '';
        return new response_1.MockResponse({
            method: usingMethod,
            baseURL: usingBaseURL,
            url: usableURL,
            params: completeParams,
            json: JSON.parse(data || '{}'),
            headers: headers || {},
        });
    }
}
exports.MockAxiosInstance = MockAxiosInstance;
function createAxiosInstance(config) {
    return new MockAxiosInstance(config);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXhpb3NJbnN0YW5jZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9zcGVjL21vY2tzL2NsaWVudC9heGlvc0luc3RhbmNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQTJDQSxrREFFQztBQTdDRCxpQ0FBa0Q7QUFFbEQseUNBQTBDO0FBRTFDLE1BQWEsaUJBQWtCLFNBQVEsYUFBSztJQU0xQyxZQUFZLE1BQTJCO1FBQ3JDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNkLE1BQU0sRUFDSixNQUFNLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxJQUFJLEdBQzFCLEdBQUcsTUFBTSxJQUFJLEVBQUUsQ0FBQztRQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUNyQixJQUFJLENBQUMsT0FBTyxHQUFHLEdBQUcsQ0FBQztRQUNuQixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUNyQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNuQixDQUFDO0lBRUQsNENBQTRDO0lBQzVDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBMEI7UUFDdEMsTUFBTSxFQUNKLE1BQU0sRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxPQUFPLEdBQ25DLEdBQUcsTUFBTSxDQUFDO1FBQ1gsTUFBTSxXQUFXLEdBQUcsTUFBTSxJQUFJLEtBQUssQ0FBQztRQUNwQyxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQztRQUN4QyxNQUFNLEtBQUssR0FBRyxDQUFBLEdBQUcsYUFBSCxHQUFHLHVCQUFILEdBQUcsQ0FBRSxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDL0UsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2RSxNQUFNLGNBQWMsR0FBRyxFQUFFLEdBQUcsV0FBVyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7UUFDbkYsTUFBTSxTQUFTLEdBQUcsQ0FBQSxHQUFHLGFBQUgsR0FBRyx1QkFBSCxHQUFHLENBQUUsS0FBSyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEtBQUksRUFBRSxDQUFDO1FBQ2xHLE9BQU8sSUFBSSx1QkFBWSxDQUFDO1lBQ3RCLE1BQU0sRUFBRSxXQUFXO1lBQ25CLE9BQU8sRUFBRSxZQUFZO1lBQ3JCLEdBQUcsRUFBRSxTQUFTO1lBQ2QsTUFBTSxFQUFFLGNBQWM7WUFDdEIsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQztZQUM5QixPQUFPLEVBQUUsT0FBTyxJQUFJLEVBQUU7U0FDdkIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQUNGO0FBckNELDhDQXFDQztBQUVELFNBQWdCLG1CQUFtQixDQUFDLE1BQTJCO0lBQzdELE9BQU8sSUFBSSxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN2QyxDQUFDIn0=