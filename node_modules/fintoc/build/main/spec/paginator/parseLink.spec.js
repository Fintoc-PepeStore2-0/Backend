"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const ava_1 = __importDefault(require("ava"));
const paginator_1 = require("../../lib/paginator");
const utils_1 = require("../shared/utils");
(0, ava_1.default)('"parseLink" link over empty object', (t) => {
    const nextURL = 'https://api.fintoc.com/v1/links?page=2';
    const object = {};
    const link = `<${nextURL}>; rel="next"`;
    const parsed = (0, paginator_1.parseLink)(object, link);
    t.assert((0, utils_1.isDictLike)(parsed));
    t.assert('next' in parsed);
    t.assert(Object.keys(parsed).length === 1);
    t.assert(parsed.next === nextURL);
});
(0, ava_1.default)('"parseLink" link over used object', (t) => {
    const nextURL = 'https://api.fintoc.com/v1/links?page=2';
    const lastURL = 'https://api.fintoc.com/v1/links?page=13';
    const object = { last: lastURL };
    const link = `<${nextURL}>; rel="next"`;
    const parsed = (0, paginator_1.parseLink)(object, link);
    t.assert((0, utils_1.isDictLike)(parsed));
    t.assert('last' in parsed);
    t.assert('next' in parsed);
    t.assert(Object.keys(parsed).length === 2);
    t.assert(parsed.last === lastURL);
    t.assert(parsed.next === nextURL);
});
(0, ava_1.default)('"parseLink" overwrite object', (t) => {
    const currentURL = 'https://api.fintoc.com/v1/links?page=2';
    const nextURL = 'https://api.fintoc.com/v1/links?page=4';
    const lastURL = 'https://api.fintoc.com/v1/links?page=13';
    const object = { next: currentURL, last: lastURL };
    const link = `<${nextURL}>; rel="next"`;
    const parsed = (0, paginator_1.parseLink)(object, link);
    t.assert((0, utils_1.isDictLike)(parsed));
    t.assert('last' in parsed);
    t.assert('next' in parsed);
    t.assert(Object.keys(parsed).length === 2);
    t.assert(parsed.last === lastURL);
    t.assert(parsed.next !== currentURL);
    t.assert(parsed.next === nextURL);
});
(0, ava_1.default)('"parseLink" invalid link', (t) => {
    const nextURL = 'https://api.fintoc.com/v1/links?page=2';
    const object = {};
    const link = `<${nextURL}>; this="is-invalid"`;
    const parsed = (0, paginator_1.parseLink)(object, link);
    t.assert((0, utils_1.isDictLike)(parsed));
    t.assert(!('next' in parsed));
    t.assert(Object.keys(parsed).length === 0);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyc2VMaW5rLnNwZWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvc3BlYy9wYWdpbmF0b3IvcGFyc2VMaW5rLnNwZWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw4Q0FBdUI7QUFFdkIsbURBQWdEO0FBQ2hELDJDQUE2QztBQUU3QyxJQUFBLGFBQUksRUFBQyxvQ0FBb0MsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFO0lBQy9DLE1BQU0sT0FBTyxHQUFHLHdDQUF3QyxDQUFDO0lBQ3pELE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztJQUNsQixNQUFNLElBQUksR0FBRyxJQUFJLE9BQU8sZUFBZSxDQUFDO0lBQ3hDLE1BQU0sTUFBTSxHQUFHLElBQUEscUJBQVMsRUFBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDdkMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFBLGtCQUFVLEVBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUM3QixDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsQ0FBQztJQUMzQixDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQzNDLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksS0FBSyxPQUFPLENBQUMsQ0FBQztBQUNwQyxDQUFDLENBQUMsQ0FBQztBQUVILElBQUEsYUFBSSxFQUFDLG1DQUFtQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUU7SUFDOUMsTUFBTSxPQUFPLEdBQUcsd0NBQXdDLENBQUM7SUFDekQsTUFBTSxPQUFPLEdBQUcseUNBQXlDLENBQUM7SUFDMUQsTUFBTSxNQUFNLEdBQUcsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLENBQUM7SUFDakMsTUFBTSxJQUFJLEdBQUcsSUFBSSxPQUFPLGVBQWUsQ0FBQztJQUN4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