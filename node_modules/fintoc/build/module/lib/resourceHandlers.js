import { objetize, objetizeGenerator } from './utils';
/**
 * Fetch all instances of a resource.
 *
 * @param client - The Client object passed to the retrieved objects
 * @param path - The path within the API server for the resource
 * @param klass - Class that will wrap the instances of the resource
 * @param handlers - The post-request handlers
 * @param methods - An array of the methods that the objects can execute
 * @param params - The parameters passed to the request
 * @returns - A generator (or an array, depending on the `lazy` param) of objects of class `klass`
 */
export async function resourceAll(client, path, klass, handlers = {}, methods, params) {
    const { lazy, ...innerParams } = { lazy: true, ...params };
    const data = await client.request({ path, paginated: true, params: innerParams });
    if (lazy) {
        return objetizeGenerator(data, klass, client, handlers, methods, path);
    }
    const elements = [];
    for await (const element of data) {
        elements.push(await objetize(klass, client, element, handlers, methods, path));
    }
    return elements;
}
/**
 * Fetch a specific instance of a resource.
 *
 * @param client - The Client object passed to the retrieved object
 * @param path - The path within the API server for the resource
 * @param id - The identifier value of the object to retrieve
 * @param klass - Class that will wrap the instance of the resource
 * @param handlers - The post-request handlers
 * @param methods - An array of the methods that the object can execute
 * @param params - The parameters passed to the request
 * @returns - An object of class `klass`
 */
export async function resourceGet(client, path, id, klass, handlers = {}, methods, params) {
    const data = await client.request({ path: `${path}/${id}`, method: 'get', params });
    return objetize(klass, client, data, handlers, methods, path);
}
/**
 * Create a new instance of a resource.
 *
 * @param client - The Client object passed to the created object
 * @param path - The path within the API server for the resource
 * @param klass - Class that will wrap the instance of the resource
 * @param handlers - The post-request handlers
 * @param methods - An array of the methods that the object can execute
 * @param params - The parameters passed to the request
 * @returns - An object of class `klass`
 */
export async function resourceCreate(client, path, klass, handlers = {}, methods, params, idempotencyKey) {
    const data = await client.request({
        path, method: 'post', json: params, idempotencyKey,
    });
    return objetize(klass, client, data, handlers, methods, path);
}
/**
 * Update a specific instance of a resource.
 *
 * @param client - The Client object passed to the updated object
 * @param path - The path within the API server for the resource
 * @param id - The identifier value of the object to update
 * @param klass - Class that will wrap the instance of the resource
 * @param handlers - The post-request handlers
 * @param methods - An array of the methods that the object can execute
 * @param params - The parameters passed to the request for the resource to be updated
 * @returns - An object of class `klass`
 */
export async function resourceUpdate(client, path, id, klass, handlers = {}, methods, params, customPath) {
    const updatePath = customPath || `${path}/${id}`;
    const data = await client.request({ path: updatePath, method: 'patch', json: params });
    return objetize(klass, client, data, handlers, methods, path);
}
/**
 * Delete an instance of a resource.
 *
 * @param client - The Client object passed to the updated object
 * @param path - The path within the API server for the resource
 * @param id - The identifier value of the object to update
 * @param params - The parameters passed to the request
 * @returns The request response
 */
export async function resourceDelete(client, path, id, params) {
    return client.request({ path: `${path}/${id}`, method: 'delete', params });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzb3VyY2VIYW5kbGVycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvcmVzb3VyY2VIYW5kbGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxPQUFPLEVBQUUsUUFBUSxFQUFFLGlCQUFpQixFQUFFLE1BQU0sU0FBUyxDQUFDO0FBRXREOzs7Ozs7Ozs7O0dBVUc7QUFDSCxNQUFNLENBQUMsS0FBSyxVQUFVLFdBQVcsQ0FDL0IsTUFBYyxFQUNkLElBQVksRUFDWixLQUFVLEVBQ1YsV0FBNEMsRUFBRSxFQUM5QyxPQUFpQixFQUNqQixNQUEyQjtJQUUzQixNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsV0FBVyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEdBQUcsTUFBTSxFQUFFLENBQUM7SUFDM0QsTUFBTSxJQUFJLEdBQUcsTUFBTSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUM7SUFDbEYsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUNULE9BQU8saUJBQWlCLENBQ3RCLElBQUksRUFDSixLQUFLLEVBQ0wsTUFBTSxFQUNOLFFBQVEsRUFDUixPQUFPLEVBQ1AsSUFBSSxDQUNMLENBQUM7SUFDSixDQUFDO0lBQ0QsTUFBTSxRQUFRLEdBQUcsRUFBRSxDQUFDO0lBQ3BCLElBQUksS0FBSyxFQUFFLE1BQU0sT0FBTyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ2pDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxRQUFRLENBQzFCLEtBQUssRUFDTCxNQUFNLEVBQ04sT0FBTyxFQUNQLFFBQVEsRUFDUixPQUFPLEVBQ1AsSUFBSSxDQUNMLENBQUMsQ0FBQztJQUNMLENBQUM7SUFDRCxPQUFPLFFBQVEsQ0FBQztBQUNsQixDQUFDO0FBRUQ7Ozs7Ozs7Ozs7O0dBV0c7QUFDSCxNQUFNLENBQUMsS0FBSyxVQUFVLFdBQVcsQ0FDL0IsTUFBYyxFQUNkLElBQVksRUFDWixFQUFVLEVBQ1YsS0FBVSxFQUNWLFdBQTRDLEVBQUUsRUFDOUMsT0FBaUIsRUFDakIsTUFBMkI7SUFFM0IsTUFBTSxJQUFJLEdBQUcsTUFBTSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUUsSUFBSSxFQUFFLEdBQUcsSUFBSSxJQUFJLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUNwRixPQUFPLFFBQVEsQ0FDYixLQUFLLEVBQ0wsTUFBTSxFQUNOLElBQUksRUFDSixRQUFRLEVBQ1IsT0FBTyxFQUNQLElBQUksQ0FDTCxDQUFDO0FBQ0osQ0FBQztBQUVEOzs7Ozs7Ozs7O0dBVUc7QUFDSCxNQUFNLENBQUMsS0FBSyxVQUFVLGNBQWMsQ0FDbEMsTUFBYyxFQUNkLElBQVksRUFDWixLQUFVLEVBQ1YsV0FBNEMsRUFBRSxFQUM5QyxPQUFpQixFQUNqQixNQUEyQixFQUMzQixjQUF1QjtJQUV2QixNQUFNLElBQUksR0FBRyxNQUFNLE1BQU0sQ0FBQyxPQUFPLENBQUM7UUFDaEMsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxjQUFjO0tBQ25ELENBQUMsQ0FBQztJQUNILE9BQU8sUUFBUSxDQUNiLEtBQUssRUFDTCxNQUFNLEVBQ04sSUFBSSxFQUNKLFFBQVEsRUFDUixPQUFPLEVBQ1AsSUFBSSxDQUNMLENBQUM7QUFDSixDQUFDO0FBRUQ7Ozs7Ozs7Ozs7O0dBV0c7QUFDSCxNQUFNLENBQUMsS0FBSyxVQUFVLGNBQWMsQ0FDbEMsTUFBYyxFQUNkLElBQVksRUFDWixFQUFVLEVBQ1YsS0FBVSxFQUNWLFdBQTRDLEVBQUUsRUFDOUMsT0FBaUIsRUFDakIsTUFBMkIsRUFDM0IsVUFBbUI7SUFFbkIsTUFBTSxVQUFVLEdBQUcsVUFBVSxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsRUFBRSxDQUFDO0lBQ2pELE1BQU0sSUFBSSxHQUFHLE1BQU0sTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUN2RixPQUFPLFFBQVEsQ0FDYixLQUFLLEVBQ0wsTUFBTSxFQUNOLElBQUksRUFDSixRQUFRLEVBQ1IsT0FBTyxFQUNQLElBQUksQ0FDTCxDQUFDO0FBQ0osQ0FBQztBQUVEOzs7Ozs7OztHQVFHO0FBQ0gsTUFBTSxDQUFDLEtBQUssVUFBVSxjQUFjLENBQ2xDLE1BQWMsRUFDZCxJQUFZLEVBQ1osRUFBVSxFQUNWLE1BQTJCO0lBRTNCLE9BQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksRUFBRSxHQUFHLElBQUksSUFBSSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7QUFDN0UsQ0FBQyJ9